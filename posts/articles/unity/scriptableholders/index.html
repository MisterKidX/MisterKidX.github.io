<!doctype html><html lang=en><head><title>Scriptable Holders</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.eee28c6b9bcdfff2e871d61e6452c5d934440b55492219aa06a62a39fcf37681.css integrity="sha256-7uKMa5vN//LocdYeZFLF2TREC1VJIhmqBqYqOfzzdoE="><link rel=icon type=image/png href=/images/logo/logo_hu9796185938629701403.png><meta property="og:url" content="https://www.dorbendor.com/posts/articles/unity/scriptableholders/"><meta property="og:site_name" content="Dor Ben Dor"><meta property="og:title" content="Scriptable Holders"><meta property="og:description" content="Scriptable Holders are Decorators for Serializable classes. They provide a simple way to hook plain code into the unity engine."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-18T00:00:00+00:00"><meta property="article:modified_time" content="2024-09-18T00:00:00+00:00"><meta property="article:tag" content="Unity"><meta property="article:tag" content="Scriptable Objects"><meta property="article:tag" content="Architecture"><meta property="article:tag" content="Coding"><meta property="article:tag" content="C#"><meta property="article:tag" content="Editor"><meta name=twitter:card content="summary"><meta name=twitter:title content="Scriptable Holders"><meta name=twitter:description content="Scriptable Holders are Decorators for Serializable classes. They provide a simple way to hook plain code into the unity engine."><meta name=description content="Scriptable Holders are Decorators for Serializable classes. They provide a simple way to hook plain code into the unity engine."><script data-goatcounter=https://misterkidx.goatcounter.com/count async src=//gc.zgo.at/count.js></script><script>theme=localStorage.getItem("theme-scheme")||localStorage.getItem("darkmode:color-scheme")||"light",theme=="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/><img src=/images/logo/logo_hu9796185938629701403.png id=logo alt=Logo>
Dor Ben Dor</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/#home>Home</a></li><li class=nav-item><a class=nav-link href=/#about>About</a></li><li class=nav-item><a class=nav-link href=/#skills>Toolbox</a></li><li class=nav-item><a class=nav-link href=/#projects>Projects</a></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/posts>Posts</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div><img src=/images/logo/logo_hu9796185938629701403.png class=d-none id=main-logo alt=Logo>
<img src=/images/logo/logo_hu9796185938629701403.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>Posts</a></li><div class=subtree><li><i data-feather=minus-circle></i><a class="active list-link" href=/posts/articles/> Articles</a><ul class=active><li><i data-feather=minus-circle></i><a class="active list-link" href=/posts/articles/unity/> Unity</a><ul class=active><li><a class="active list-link" href=/posts/articles/unity/scriptableholders/ title="Scriptable Holders">Scriptable Holders</a></li></ul></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/projects/> Projects</a><ul><li><i data-feather=plus-circle></i><a class=list-link href=/posts/projects/published/> Published</a><ul><li><a class=list-link href=/posts/projects/published/warriors-rise-to-glory/ title="Warriors: Rise to Glory">Warriors: Rise to Glory</a></li><li><a class=list-link href=/posts/projects/published/midbaryom/ title=Midbaryom>Midbaryom</a></li><li><a class=list-link href=/posts/projects/published/summoners-royale/ title="Summoners Royale">Summoners Royale</a></li><li><a class=list-link href=/posts/projects/published/yeti-getaway/ title="Yeti Getaway">Yeti Getaway</a></li><li><a class=list-link href=/posts/projects/published/party-cat/ title="Party Cat">Party Cat</a></li><li><a class=list-link href=/posts/projects/published/colormaze/ title="Color Maze">Color Maze</a></li><li><a class=list-link href=/posts/projects/published/brainiac/ title=Brainiac>Brainiac</a></li><li><a class=list-link href=/posts/projects/published/neuroderm/ title=Neuroderm>Neuroderm</a></li><li><a class=list-link href=/posts/projects/published/bow-and-arrow/ title="Bow & Arrow">Bow & Arrow</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/projects/canceled/> Canceled</a><ul><li><a class=list-link href=/posts/projects/canceled/phantom-beasts/ title="Phantom Beasts">Phantom Beasts</a></li></ul></li><li><a class=list-link href=/posts/drafts/projects-not-implemented/backgammon-live/ title="Backgammon Live">Backgammon Live</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/prototypes/> Prototypes</a><ul><li><i data-feather=plus-circle></i><a class=list-link href=/posts/prototypes/game-a-week/> Game a Week</a><ul><li><a class=list-link href=/posts/prototypes/game-a-week/rules/ title=Rules>Rules</a></li><li><a class=list-link href=/posts/prototypes/game-a-week/homm/ title=HoMM>HoMM</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/prototypes/hackathons/> Hackathons</a><ul><li><a class=list-link href=/posts/prototypes/hackathons/treasure-hunt/ title="Treasure Hunt">Treasure Hunt</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/prototypes/exercises/> Exercises</a><ul><li><a class=list-link href=/posts/prototypes/exercises/vox/ title=VoX>VoX</a></li></ul></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/posts/articles/unity/scriptableholders/Banner_ScriptableHolders.png)></div><div class=page-content><div class="author-profile ms-auto align-self-lg-center"><img class=rounded-circle src=/images/author/dor_pixelart_hu3043489612906282345.png alt="Author Image"><h5 class=author-name>Dor Ben Dor</h5><p class=text-muted>Wednesday, September 18, 2024</p></div><div class=title><h1>Scriptable Holders</h1></div><div class=post-content id=post-content><h3 id=preface>Preface</h3><p><a href=https://docs.unity3d.com/Manual/class-ScriptableObject.html target=_blank rel=noopener>Scriptable Objects</a> (SOs) are awesome. It&rsquo;s been said before, it will be said in the future and currently, many Unity devs use them to architect their code and write great games. But (you knew this was coming), they are still a tight coupling to the unity engine - Scriptable Objects only make sense inside the unity framework. I noticed most Unity devs don&rsquo;t give a f*** about this, but I do give plenty. To avoid my rant about how writing C# in Unity is like driving a Bugatti at 10 MPH on the freeway I&rsquo;ll just say that I like to write <a href=https://en.wikipedia.org/wiki/Plain_old_CLR_object target=_blank rel=noopener>Plain Old C# Objects</a> (<a href="https://www.youtube.com/watch?v=yg8116aeD7E&amp;ab_channel=DisneyMusicVEVO" target=_blank rel=noopener>POCOS</a>) and that writing code that is not tightly coupled to a specific framework is generally a good thing.</p><p>Stemming from this assumption, and admitting that not all code files are yours to change and just inherit from ScriptableObject, I created Scriptable Holders - simple SOs that decorate serializable classes and allow me to hook my plain classes back into Unity.</p><p>Scriptable Holders are a framework-specific solution for unity. In essence, they are <a href=https://refactoring.guru/design-patterns/decorator target=_blank rel=noopener>Decorators</a> for POCOS - they provide an easy way to hook POCOS into the unity framework. In a semantic way, scriptable holders are like the old <a href="https://learn.microsoft.com/en-us/dotnet/api/system.nullable-1?view=net-8.0" target=_blank rel=noopener>Nullable&lt;T></a> implementation in C#, or <a href="https://learn.microsoft.com/en-us/dotnet/api/system.lazy-1?view=net-8.0" target=_blank rel=noopener>Lazy&lt;T></a>. They just wrap around a value to give it special properties, in this case, hooking it to unity.</p><p>I originally needed them a couple of years back while wanting to debug and create client-side mock environments for my client&rsquo;s server. I wrapped serializable API responses, thus allowing both me and the QA to quickly change and view the response in editor time to suit our needs.</p><p float=left align=center><img src=MockAPI.svg width=30%>
<img src=MockAPIHolder.svg width=30%>
<img src=scriptableHolderAPIResponse_noEditor.png width=30%></p><h3 id=abstract>Abstract</h3><p><strong>Problem Statement</strong> - I want to hook my C# code to unity without inheriting from <code>ScriptableObject</code>, either because I can&rsquo;t or because I don&rsquo;t want to tightly couple my code.</p><p><strong>Solution</strong> - Scriptable Holders: SOs designed to hold an external serialized class value.</p><h4 id=code-solution>Code Solution</h4><p>Let&rsquo;s create an abstract class that will hold the structure of what Scriptable Holders (SH) do. Derived classes would just need to inherit from this base class and add an attribute for creating the SO.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C# data-lang=C#><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ScriptableHolder</span>&lt;T&gt; : ScriptableObject
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> T Value;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><p>this sets us on a good path<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>. Let&rsquo;s test an implementation and see it in the Unity editor.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#a6e22e>[UnityEngine.CreateAssetMenu(menuName = &#34;Create Player Mock API Holder&#34;)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PlayerMockAPIResponseHolder</span> : ScriptableHolder&lt;PlayerMockAPIResponse&gt; { }
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#a6e22e>[Serializable]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PlayerMockAPIResponse</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> Name;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> Money;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> Damage;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>float</span> DamageReduction;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><p align=center><img title="Player Mock Response Holder" alt="an image of an SO holding reference to the mock API class" src=scriptableHolderAPIResponse_noEditor.png></p><p>Now we have a base class for holding external values. All this SO does is wrap around the T value, in this case, the <code>PlayerMockAPIResponse</code>. Imagine you get an API response from your server and want to debug its values easily: create local mock responses, mutate existing responses, visually see the response, and allow less technical staff to view the data.</p><p>You can also easily use the ScriptableHolder&lt;T> class as a member of any other class, and monobehaviours will serialize it properly.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MBTestSH</span> : MonoBehaviour
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ScriptableHolder&lt;PlayerMockAPIResponse&gt; genric;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> PlayerMockAPIResponseHolder dervied;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p align=center><img src=MBTestSH.png></p><p>This is enough to start using this framework solution, but&mldr; I&rsquo;ve used holders for quite some time and seeing that annoying foldout arrow and having all the data indented annoyed the living hell out of me. It&rsquo;s time for some editor scripting y&rsquo;all.</p><h3 id=editor>Editor</h3><p>In our editor scripting journey, we are going to do the following:</p><ul><li>we are going to get rid of that annoying foldout arrow</li><li>we are going to apply the editor script to all inheriting members of ScriptableHolder base class</li><li>we are going to deny wrapping around MonoBehaviours</li><li>we are going to deny wrapping around none supported types</li><li>we are going to set a customized icon for all holders</li><li>we are going to set a customized icon for bad holders</li></ul><h4 id=the-annoying-foldout-arrow>The Annoying Foldout Arrow</h4><p>You would expect Unity to have a simple API method for this, or even something hidden you could extract with reflection. But no. We have to do it manually.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#66d9ef>using</span> System.Reflection;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> UnityEngine;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> UnityEditor;
</span></span><span style=display:flex><span><span style=color:#a6e22e>
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>[CustomEditor(typeof(ScriptableHolder&lt;&gt;), true)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ScriptableHolderEditor</span> : Editor
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> OnInspectorGUI()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        serializedObject.Update();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        SerializedProperty valueProp = serializedObject.FindProperty(<span style=color:#e6db74>&#34;Value&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (valueProp != <span style=color:#66d9ef>null</span> &amp;&amp; valueProp.propertyType == SerializedPropertyType.Generic)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> SOType = target.GetType();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> type = SOType.GetField(<span style=color:#e6db74>&#34;Value&#34;</span>).FieldType;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> fields = type.GetFields(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>foreach</span> (<span style=color:#66d9ef>var</span> field <span style=color:#66d9ef>in</span> fields)
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                SerializedProperty fieldProp = valueProp.FindPropertyRelative(field.Name);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (fieldProp != <span style=color:#66d9ef>null</span>)
</span></span><span style=display:flex><span>                    EditorGUILayout.PropertyField(fieldProp, <span style=color:#66d9ef>new</span> GUIContent(ObjectNames.NicifyVariableName(field.Name)));
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        serializedObject.ApplyModifiedProperties();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><p>All and all this is pretty straightforward. We collect all fields of the serialized class, find their respective Serialized Properties, and serialize them back. Using Serialized Properties assures us we only show the fields that should be serialized, and we hook into Unity&rsquo;s Do\Undo system and save system.</p><p><a href=https://docs.unity3d.com/ScriptReference/ObjectNames.html target=_blank rel=noopener><code>ObjectNames</code></a> is a helper class for displaying field names nicely (e.g. field name could be _myVar and display is My Var).</p><p>Pay attention to <a href=https://docs.unity3d.com/ScriptReference/CustomEditor-ctor.html target=_blank rel=noopener><code>[CustomEditor(typeof(ScriptableHolder&lt;>), true)]</code></a>, we added another boolean argument with a <code>true</code> value. This will allow our editor script to be drawn for all inheriting classes of ScriptableHolder&lt;>. Without this, you would see no changes to the editor representation of holder objects.</p><p>Open Unity, create a new instance of <code>PlayerMockAPIResponseHolder</code> and watch that nicely none-tabbed data. That menacing arrow is gone.</p><p align=center><img title="Player Mock Response Holder" alt="an image of an SO holding reference to the mock API class with the editor script" src=scriptableHolderAPIResponse.png><p align=center style=color:gray;font-size:12px><i>"Oh, thank god" - OCD game dev</i></p></p><h4 id=denying-bad-generic-arguments>Denying Bad Generic Arguments</h4><p>Our Scriptable Holder is intended to hold a reference to Serializable POCOS, nothing else. Although theoretically, it can hold any value, I didn&rsquo;t find any reason to support this via editor script (<a href=https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it target=_blank rel=noopener>YAGNI</a>). This means we need to notify anyone using a Scriptable Holder that she is doing something wrong. Adding the following <code>else</code> clauses closes the deal.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (valueProp != <span style=color:#66d9ef>null</span> &amp;&amp; valueProp.propertyType == SerializedPropertyType.ObjectReference)
</span></span><span style=display:flex><span>    EditorGUILayout.HelpBox(<span style=color:#e6db74>&#34;You cannot wrap values that derive from UnityEngine.Object.&#34;</span>, MessageType.Warning);
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    EditorGUILayout.HelpBox(<span style=color:#e6db74>&#34;No valid &#39;Value&#39; property found.&#34;</span>, MessageType.Warning);
</span></span></code></pre></div><p><p>Now this is how things look like if we try to wrap around a Gameobject.</p><p align=center><img title="Player Mock Response Holder" alt="an image of an SO holding reference to the mock API class with the editor script" src=WrappingGameobject.png></p><h4 id=improving-editor-ux>Improving Editor UX</h4><p>To differentiate our Scriptable Holders from other common-peasent scriptable objects we need a customized icon. While setting icons can be done through the editor, in this case, it&rsquo;ll not work. Since <code>ScriptableHolder</code> is abstract, it never has instances, and derived classes do not &ldquo;inherit&rdquo; icons. We must do this through our editor script, as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#75715e>// this is instead of setting the icon manualy for each new derived ScriptableHolder</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> Texture2D RenderStaticPreview(<span style=color:#66d9ef>string</span> assetPath, Object[] subAssets, <span style=color:#66d9ef>int</span> width, <span style=color:#66d9ef>int</span> height)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> icon = AssetDatabase.LoadAssetAtPath&lt;Texture2D&gt;(<span style=color:#e6db74>&#34;Assets/Gizmos/ScriptableHolder Icon.png&#34;</span>);
</span></span><span style=display:flex><span>    EditorGUIUtility.SetIconForObject(target, icon);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>base</span>.RenderStaticPreview(assetPath, subAssets, width, height);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><p align=center><img src=inspectorIcon.png></p><p align=center><img src=heirarchyIcon.png></p><p>Of course, we need a texture named so in the Gizmos folder<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>, if you are building this on your own instead of forking the repo, you can go ahead and use the icon i&rsquo;ve prepared in the repo.</p><p>There&rsquo;s one final touch before wer&rsquo;e through. I want Scriptable Holders with bad generic argument to show a warning icon. Let&rsquo;s refactor:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#75715e>// this is instead of setting the icon manualy for each new derived ScriptableHolder</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> Texture2D RenderStaticPreview(<span style=color:#66d9ef>string</span> assetPath, Object[] subAssets, <span style=color:#66d9ef>int</span> width, <span style=color:#66d9ef>int</span> height)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    SerializedProperty valueProp = serializedObject.FindProperty(<span style=color:#e6db74>&#34;Value&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (valueProp != <span style=color:#66d9ef>null</span> &amp;&amp; valueProp.propertyType == SerializedPropertyType.Generic)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> icon = AssetDatabase.LoadAssetAtPath&lt;Texture2D&gt;(<span style=color:#e6db74>&#34;Assets/Gizmos/ScriptableHolder Icon.png&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        EditorGUIUtility.SetIconForObject(target, icon);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        EditorGUIUtility.SetIconForObject(target, EditorGUIUtility.IconContent(<span style=color:#e6db74>&#34;console.warnicon@2x&#34;</span>).image <span style=color:#66d9ef>as</span> Texture2D);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>base</span>.RenderStaticPreview(assetPath, subAssets, width, height);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><p>Nothing fancy here, maybe just a bit cryptic. The <a href=https://docs.unity3d.com/ScriptReference/EditorGUIUtility.IconContent.html target=_blank rel=noopener><code>EditorGuiUtility.IconContent</code></a> allows us to fetch internal and default unity icons.</p><h3 id=summary>Summary</h3><p>Scriptable Hodlers are great. They allow us to Decorate a serializable class with the capabilites of a Scriptable Object, easily hooking the class to unity and keeping the original code clean and decoupled. They are simple, scarcely used, and they would not change the way you work with Unity - which is exactly why I like them.</p><h5 id=important-links>Important Links</h5><p><a href=https://github.com/MisterKidX/Articles/tree/ScriptableHolders target=_blank rel=noopener>ðŸ”— My Git Repo for Article</a> - find a complete unity project with all code samples present</p><p><a href=https://github.com/MisterKidX/UnityCodingToolset target=_blank rel=noopener>ðŸ”— My Unity Coding Toolset Repo</a> - my coding package for unity, which scriptable holders is a part of (doesn&rsquo;t really deserve a standalone package)</p><p><a href=https://github.com/jasursadikov/unity-editor-icons target=_blank rel=noopener>ðŸ”— Unity Editor Icons</a> - Check out this great repo for all the editor internal icons.</p><h4 id=final-code>Final Code</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#66d9ef>using</span> System;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> UnityEngine;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ScriptableHolder</span>&lt;T&gt; : ScriptableObject
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> T Value;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>[Serializable]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PlayerMockAPIResponse</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> Name;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> Money;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> Damage;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>float</span> DamageReduction;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#66d9ef>using</span> System.Reflection;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> UnityEngine;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> UnityEditor;
</span></span><span style=display:flex><span><span style=color:#a6e22e>
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>[CustomEditor(typeof(ScriptableHolder&lt;&gt;), true)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ScriptableHolderEditor</span> : Editor
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> OnInspectorGUI()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        serializedObject.Update();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        SerializedProperty valueProp = serializedObject.FindProperty(<span style=color:#e6db74>&#34;Value&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (valueProp != <span style=color:#66d9ef>null</span> &amp;&amp; valueProp.propertyType == SerializedPropertyType.Generic)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> SOType = target.GetType();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> type = SOType.GetField(<span style=color:#e6db74>&#34;Value&#34;</span>).FieldType;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> fields = type.GetFields(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>foreach</span> (<span style=color:#66d9ef>var</span> field <span style=color:#66d9ef>in</span> fields)
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                SerializedProperty fieldProp = valueProp.FindPropertyRelative(field.Name);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (fieldProp != <span style=color:#66d9ef>null</span>)
</span></span><span style=display:flex><span>                    EditorGUILayout.PropertyField(fieldProp, <span style=color:#66d9ef>new</span> GUIContent(ObjectNames.NicifyVariableName(field.Name)));
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (valueProp != <span style=color:#66d9ef>null</span> &amp;&amp; valueProp.propertyType == SerializedPropertyType.ObjectReference)
</span></span><span style=display:flex><span>            EditorGUILayout.HelpBox(<span style=color:#e6db74>&#34;You cannot wrap values that derive from UnityEngine.Object.&#34;</span>, MessageType.Warning);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>            EditorGUILayout.HelpBox(<span style=color:#e6db74>&#34;No valid &#39;Value&#39; property found.&#34;</span>, MessageType.Warning);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        serializedObject.ApplyModifiedProperties();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// this is instead of setting the icon manualy for each new derived ScriptableHolder</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> Texture2D RenderStaticPreview(<span style=color:#66d9ef>string</span> assetPath, Object[] subAssets, <span style=color:#66d9ef>int</span> width, <span style=color:#66d9ef>int</span> height)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        SerializedProperty valueProp = serializedObject.FindProperty(<span style=color:#e6db74>&#34;Value&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (valueProp != <span style=color:#66d9ef>null</span> &amp;&amp; valueProp.propertyType == SerializedPropertyType.Generic)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> icon = AssetDatabase.LoadAssetAtPath&lt;Texture2D&gt;(<span style=color:#e6db74>&#34;Assets/Gizmos/ScriptableHolder Icon.png&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            EditorGUIUtility.SetIconForObject(target, icon);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            EditorGUIUtility.SetIconForObject(target, EditorGUIUtility.IconContent(<span style=color:#e6db74>&#34;console.warnicon@2x&#34;</span>).image <span style=color:#66d9ef>as</span> Texture2D);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>base</span>.RenderStaticPreview(assetPath, subAssets, width, height);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#a6e22e>[UnityEngine.CreateAssetMenu(menuName = &#34;Create Player Mock API Holder&#34;)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PlayerMockAPIResponseHolder</span> : ScriptableHolder&lt;PlayerMockAPIResponse&gt; { }
</span></span></code></pre></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>If you are worried about encapsulation of the Value field, you can use a virtual property to allow inheritors to define their own access modifier to the value.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>You don&rsquo;t have to place the image in the Gizmos folder or name it so, but&mldr; Images places in the Gizmos and named in the following pattern &ldquo;&lt;SCRIPTNAME> Icon&rdquo; will replace the icon for the script.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class="row ps-3 pe-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn icon-button bg-facebook" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.dorbendor.com%2fposts%2farticles%2funity%2fscriptableholders%2f" target=_blank><i class="fab fa-facebook"></i>
</a><a class="btn icon-button bg-twitter" href="https://twitter.com/share?url=https%3a%2f%2fwww.dorbendor.com%2fposts%2farticles%2funity%2fscriptableholders%2f&text=Scriptable%20Holders&via=Dor%20Ben%20Dor" target=_blank><i class="fab fa-twitter"></i>
</a><a class="btn icon-button bg-reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.dorbendor.com%2fposts%2farticles%2funity%2fscriptableholders%2f&title=Scriptable%20Holders" target=_blank><i class="fab fa-reddit"></i>
</a><a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.dorbendor.com%2fposts%2farticles%2funity%2fscriptableholders%2f&title=Scriptable%20Holders" target=_blank><i class="fab fa-linkedin"></i>
</a><a class="btn icon-button bg-whatsapp" href="https://api.whatsapp.com/send?text=Scriptable%20Holders https%3a%2f%2fwww.dorbendor.com%2fposts%2farticles%2funity%2fscriptableholders%2f" target=_blank><i class="fab fa-whatsapp"></i>
</a><a class="btn icon-button" href="mailto:?subject=Scriptable%20Holders&body=https%3a%2f%2fwww.dorbendor.com%2fposts%2farticles%2funity%2fscriptableholders%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/MisterKidX/MisterKidX.github.io/edit/source/content/posts/articles/Unity/scriptableHolders/index.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-12 next-article"><a href=/posts/projects/published/warriors-rise-to-glory/ title="Warriors: Rise To Glory" class="btn filled-button"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>Warriors: Rise To Glory</div></a></div></div><hr><script src=https://giscus.app/client.js data-repo=MisterKidX/MisterKidX.github.io data-repo-id=R_kgDOHlCm-Q data-category=Announcements data-category-id=DIC_kwDOHlCm-c4CP8g- data-mapping=url data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang crossorigin=anonymous async></script></div></div></div><a id=scroll-to-top class=btn type=button data-bs-toggle=tooltip data-bs-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://www.dorbendor.com/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://www.dorbendor.com/#skills>Toolbox</a></li><li class=nav-item><a class=smooth-scroll href=https://www.dorbendor.com/#projects>Projects</a></li><li class=nav-item><a class=smooth-scroll href=/tags>Tags</a></li><li class=nav-item><a class=smooth-scroll href=/categories>Categories</a></li><li class=nav-item><a class=smooth-scroll href=https://ko-fi.com/dorbendor>Buy Me Coffee</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:contact@dorbendor.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>contact@dorbendor.com</span></a></li><li><a href=https://github.com/misterkidx target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>misterkidx</span></a></li><li><a href=https://www.linkedin.com/in/dorbendor target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Dor Ben Dor</span></a></li></ul></div><div class="col-md-4 col-sm-12"><p>Stay up to date with email notification</p><form action=http://eepurl.com/g-jbd9 method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate><div class=form-group><input type=email class=form-control id=mce-EMAIL name=EMAIL aria-describedby=emailHelp placeholder="Enter email">
<small id=emailHelp class="form-text text-muted">By entering your email address, you agree to receive the newsletter of this website.</small></div><button type=submit class="btn btn-info">Submit</button></form></div></div></div></footer><script src=/application.65f34d61681c19047b12127755f5d5d303f18405586df8c5e447fbceec6ca7af.js integrity="sha256-ZfNNYWgcGQR7EhJ3VfXV0wPxhAVYbfjF5Ef7zuxsp68=" defer></script></body></html>